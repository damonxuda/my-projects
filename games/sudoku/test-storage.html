<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯•æ•°ç‹¬å­˜å‚¨ç³»ç»Ÿ</title>
</head>
<body>
    <h1>æ•°ç‹¬å­˜å‚¨ç³»ç»Ÿæµ‹è¯•</h1>
    <button id="test-storage">æµ‹è¯•å­˜å‚¨</button>
    <div id="result"></div>

    <!-- å¼•å…¥è„šæœ¬ -->
    <script src="../shared/js/gameUtils.js"></script>
    <script src="../shared/js/storage.js"></script>

    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- æ™ºèƒ½å­˜å‚¨ç³»ç»Ÿ -->
    <script src="../shared/js/gameConfig.js"></script>
    <script src="../shared/js/smartGameStorage.js"></script>

    <script>
        document.getElementById('test-storage').addEventListener('click', async () => {
            const resultDiv = document.getElementById('result');
            try {
                // åˆ›å»ºå­˜å‚¨å®ä¾‹
                const storage = new SmartSudokuStorage();
                resultDiv.innerHTML += '<p>âœ… SmartSudokuStorage åˆ›å»ºæˆåŠŸ</p>';

                // æ£€æŸ¥æ–¹æ³•
                resultDiv.innerHTML += '<p>updateLevelRecordç±»å‹: ' + typeof storage.updateLevelRecord + '</p>';
                resultDiv.innerHTML += '<p>loadProgressç±»å‹: ' + typeof storage.loadProgress + '</p>';
                resultDiv.innerHTML += '<p>forceSyncNowç±»å‹: ' + typeof storage.forceSyncNow + '</p>';

                // æµ‹è¯•ä¿å­˜
                resultDiv.innerHTML += '<p>ğŸš€ å¼€å§‹æµ‹è¯• updateLevelRecord...</p>';
                await storage.updateLevelRecord('easy', 1, 120, 3);
                resultDiv.innerHTML += '<p>âœ… updateLevelRecord è°ƒç”¨æˆåŠŸ</p>';

                // æµ‹è¯•è¯»å–
                const progress = await storage.loadProgress();
                resultDiv.innerHTML += '<p>âœ… è¯»å–è¿›åº¦: ' + JSON.stringify(progress, null, 2) + '</p>';

            } catch (error) {
                resultDiv.innerHTML += '<p>âŒ é”™è¯¯: ' + error.message + '</p>';
                resultDiv.innerHTML += '<p>è¯¦ç»†: ' + error.stack + '</p>';
            }
        });
    </script>
</body>
</html>