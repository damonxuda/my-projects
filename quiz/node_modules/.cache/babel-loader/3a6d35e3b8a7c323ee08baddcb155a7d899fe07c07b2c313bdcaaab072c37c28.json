{"ast":null,"code":"import{API_VERSION_HEADER_NAME,BASE64URL_REGEX}from'./constants';import{AuthInvalidJwtError}from'./errors';import{base64UrlToUint8Array,stringFromBase64URL}from'./base64url';export function expiresAt(expiresIn){const timeNow=Math.round(Date.now()/1000);return timeNow+expiresIn;}export function uuid(){return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){const r=Math.random()*16|0,v=c=='x'?r:r&0x3|0x8;return v.toString(16);});}export const isBrowser=()=>typeof window!=='undefined'&&typeof document!=='undefined';const localStorageWriteTests={tested:false,writable:false};/**\n * Checks whether localStorage is supported on this browser.\n */export const supportsLocalStorage=()=>{if(!isBrowser()){return false;}try{if(typeof globalThis.localStorage!=='object'){return false;}}catch(e){// DOM exception when accessing `localStorage`\nreturn false;}if(localStorageWriteTests.tested){return localStorageWriteTests.writable;}const randomKey=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(randomKey,randomKey);globalThis.localStorage.removeItem(randomKey);localStorageWriteTests.tested=true;localStorageWriteTests.writable=true;}catch(e){// localStorage can't be written to\n// https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\nlocalStorageWriteTests.tested=true;localStorageWriteTests.writable=false;}return localStorageWriteTests.writable;};/**\n * Extracts parameters encoded in the URL both in the query and fragment.\n */export function parseParametersFromURL(href){const result={};const url=new URL(href);if(url.hash&&url.hash[0]==='#'){try{const hashSearchParams=new URLSearchParams(url.hash.substring(1));hashSearchParams.forEach((value,key)=>{result[key]=value;});}catch(e){// hash is not a query string\n}}// search parameters take precedence over hash parameters\nurl.searchParams.forEach((value,key)=>{result[key]=value;});return result;}export const resolveFetch=customFetch=>{let _fetch;if(customFetch){_fetch=customFetch;}else if(typeof fetch==='undefined'){_fetch=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return import('@supabase/node-fetch').then(_ref=>{let{default:fetch}=_ref;return fetch(...args);});};}else{_fetch=fetch;}return function(){return _fetch(...arguments);};};export const looksLikeFetchResponse=maybeResponse=>{return typeof maybeResponse==='object'&&maybeResponse!==null&&'status'in maybeResponse&&'ok'in maybeResponse&&'json'in maybeResponse&&typeof maybeResponse.json==='function';};// Storage helpers\nexport const setItemAsync=async(storage,key,data)=>{await storage.setItem(key,JSON.stringify(data));};export const getItemAsync=async(storage,key)=>{const value=await storage.getItem(key);if(!value){return null;}try{return JSON.parse(value);}catch(_a){return value;}};export const removeItemAsync=async(storage,key)=>{await storage.removeItem(key);};/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */export class Deferred{constructor(){// eslint-disable-next-line @typescript-eslint/no-extra-semi\n;this.promise=new Deferred.promiseConstructor((res,rej)=>{// eslint-disable-next-line @typescript-eslint/no-extra-semi\n;this.resolve=res;this.reject=rej;});}}Deferred.promiseConstructor=Promise;export function decodeJWT(token){const parts=token.split('.');if(parts.length!==3){throw new AuthInvalidJwtError('Invalid JWT structure');}// Regex checks for base64url format\nfor(let i=0;i<parts.length;i++){if(!BASE64URL_REGEX.test(parts[i])){throw new AuthInvalidJwtError('JWT not in base64url format');}}const data={// using base64url lib\nheader:JSON.parse(stringFromBase64URL(parts[0])),payload:JSON.parse(stringFromBase64URL(parts[1])),signature:base64UrlToUint8Array(parts[2]),raw:{header:parts[0],payload:parts[1]}};return data;}/**\n * Creates a promise that resolves to null after some time.\n */export async function sleep(time){return await new Promise(accept=>{setTimeout(()=>accept(null),time);});}/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */export function retryable(fn,isRetryable){const promise=new Promise((accept,reject)=>{// eslint-disable-next-line @typescript-eslint/no-extra-semi\n;(async()=>{for(let attempt=0;attempt<Infinity;attempt++){try{const result=await fn(attempt);if(!isRetryable(attempt,null,result)){accept(result);return;}}catch(e){if(!isRetryable(attempt,e)){reject(e);return;}}}})();});return promise;}function dec2hex(dec){return('0'+dec.toString(16)).substr(-2);}// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\nexport function generatePKCEVerifier(){const verifierLength=56;const array=new Uint32Array(verifierLength);if(typeof crypto==='undefined'){const charSet='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';const charSetLen=charSet.length;let verifier='';for(let i=0;i<verifierLength;i++){verifier+=charSet.charAt(Math.floor(Math.random()*charSetLen));}return verifier;}crypto.getRandomValues(array);return Array.from(array,dec2hex).join('');}async function sha256(randomString){const encoder=new TextEncoder();const encodedData=encoder.encode(randomString);const hash=await crypto.subtle.digest('SHA-256',encodedData);const bytes=new Uint8Array(hash);return Array.from(bytes).map(c=>String.fromCharCode(c)).join('');}export async function generatePKCEChallenge(verifier){const hasCryptoSupport=typeof crypto!=='undefined'&&typeof crypto.subtle!=='undefined'&&typeof TextEncoder!=='undefined';if(!hasCryptoSupport){console.warn('WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.');return verifier;}const hashed=await sha256(verifier);return btoa(hashed).replace(/\\+/g,'-').replace(/\\//g,'_').replace(/=+$/,'');}export async function getCodeChallengeAndMethod(storage,storageKey){let isPasswordRecovery=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const codeVerifier=generatePKCEVerifier();let storedCodeVerifier=codeVerifier;if(isPasswordRecovery){storedCodeVerifier+='/PASSWORD_RECOVERY';}await setItemAsync(storage,`${storageKey}-code-verifier`,storedCodeVerifier);const codeChallenge=await generatePKCEChallenge(codeVerifier);const codeChallengeMethod=codeVerifier===codeChallenge?'plain':'s256';return[codeChallenge,codeChallengeMethod];}/** Parses the API version which is 2YYY-MM-DD. */const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;export function parseResponseAPIVersion(response){const apiVersion=response.headers.get(API_VERSION_HEADER_NAME);if(!apiVersion){return null;}if(!apiVersion.match(API_VERSION_REGEX)){return null;}try{const date=new Date(`${apiVersion}T00:00:00.0Z`);return date;}catch(e){return null;}}export function validateExp(exp){if(!exp){throw new Error('Missing exp claim');}const timeNow=Math.floor(Date.now()/1000);if(exp<=timeNow){throw new Error('JWT has expired');}}export function getAlgorithm(alg){switch(alg){case'RS256':return{name:'RSASSA-PKCS1-v1_5',hash:{name:'SHA-256'}};case'ES256':return{name:'ECDSA',namedCurve:'P-256',hash:{name:'SHA-256'}};default:throw new Error('Invalid alg claim');}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;export function validateUUID(str){if(!UUID_REGEX.test(str)){throw new Error('@supabase/auth-js: Expected parameter to be UUID but is not');}}export function userNotAvailableProxy(){const proxyTarget={};return new Proxy(proxyTarget,{get:(target,prop)=>{if(prop==='__isUserNotAvailableProxy'){return true;}// Preventative check for common problematic symbols during cloning/inspection\n// These symbols might be accessed by structuredClone or other internal mechanisms.\nif(typeof prop==='symbol'){const sProp=prop.toString();if(sProp==='Symbol(Symbol.toPrimitive)'||sProp==='Symbol(Symbol.toStringTag)'||sProp==='Symbol(util.inspect.custom)'){// Node.js util.inspect\nreturn undefined;}}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the \"${prop}\" property of the session object is not supported. Please use getUser() instead.`);},set:(_target,prop)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the \"${prop}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`);},deleteProperty:(_target,prop)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the \"${prop}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`);}});}/**\n * Deep clones a JSON-serializable object using JSON.parse(JSON.stringify(obj)).\n * Note: Only works for JSON-safe data.\n */export function deepClone(obj){return JSON.parse(JSON.stringify(obj));}","map":{"version":3,"names":["API_VERSION_HEADER_NAME","BASE64URL_REGEX","AuthInvalidJwtError","base64UrlToUint8Array","stringFromBase64URL","expiresAt","expiresIn","timeNow","Math","round","Date","now","uuid","replace","c","r","random","v","toString","isBrowser","window","document","localStorageWriteTests","tested","writable","supportsLocalStorage","globalThis","localStorage","e","randomKey","setItem","removeItem","parseParametersFromURL","href","result","url","URL","hash","hashSearchParams","URLSearchParams","substring","forEach","value","key","searchParams","resolveFetch","customFetch","_fetch","fetch","_len","arguments","length","args","Array","_key","then","_ref","default","looksLikeFetchResponse","maybeResponse","json","setItemAsync","storage","data","JSON","stringify","getItemAsync","getItem","parse","_a","removeItemAsync","Deferred","constructor","promise","promiseConstructor","res","rej","resolve","reject","Promise","decodeJWT","token","parts","split","i","test","header","payload","signature","raw","sleep","time","accept","setTimeout","retryable","fn","isRetryable","attempt","Infinity","dec2hex","dec","substr","generatePKCEVerifier","verifierLength","array","Uint32Array","crypto","charSet","charSetLen","verifier","charAt","floor","getRandomValues","from","join","sha256","randomString","encoder","TextEncoder","encodedData","encode","subtle","digest","bytes","Uint8Array","map","String","fromCharCode","generatePKCEChallenge","hasCryptoSupport","console","warn","hashed","btoa","getCodeChallengeAndMethod","storageKey","isPasswordRecovery","undefined","codeVerifier","storedCodeVerifier","codeChallenge","codeChallengeMethod","API_VERSION_REGEX","parseResponseAPIVersion","response","apiVersion","headers","get","match","date","validateExp","exp","Error","getAlgorithm","alg","name","namedCurve","UUID_REGEX","validateUUID","str","userNotAvailableProxy","proxyTarget","Proxy","target","prop","sProp","set","_target","deleteProperty","deepClone","obj"],"sources":["/Users/damonxu/Documents/GitHub/my-projects/auth/node_modules/@supabase/auth-js/src/lib/helpers.ts"],"sourcesContent":["import { API_VERSION_HEADER_NAME, BASE64URL_REGEX } from './constants'\nimport { AuthInvalidJwtError } from './errors'\nimport { base64UrlToUint8Array, stringFromBase64URL } from './base64url'\nimport { JwtHeader, JwtPayload, SupportedStorage, User } from './types'\n\nexport function expiresAt(expiresIn: number) {\n  const timeNow = Math.round(Date.now() / 1000)\n  return timeNow + expiresIn\n}\n\nexport function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0,\n      v = c == 'x' ? r : (r & 0x3) | 0x8\n    return v.toString(16)\n  })\n}\n\nexport const isBrowser = () => typeof window !== 'undefined' && typeof document !== 'undefined'\n\nconst localStorageWriteTests = {\n  tested: false,\n  writable: false,\n}\n\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n  if (!isBrowser()) {\n    return false\n  }\n\n  try {\n    if (typeof globalThis.localStorage !== 'object') {\n      return false\n    }\n  } catch (e) {\n    // DOM exception when accessing `localStorage`\n    return false\n  }\n\n  if (localStorageWriteTests.tested) {\n    return localStorageWriteTests.writable\n  }\n\n  const randomKey = `lswt-${Math.random()}${Math.random()}`\n\n  try {\n    globalThis.localStorage.setItem(randomKey, randomKey)\n    globalThis.localStorage.removeItem(randomKey)\n\n    localStorageWriteTests.tested = true\n    localStorageWriteTests.writable = true\n  } catch (e) {\n    // localStorage can't be written to\n    // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n\n    localStorageWriteTests.tested = true\n    localStorageWriteTests.writable = false\n  }\n\n  return localStorageWriteTests.writable\n}\n\n/**\n * Extracts parameters encoded in the URL both in the query and fragment.\n */\nexport function parseParametersFromURL(href: string) {\n  const result: { [parameter: string]: string } = {}\n\n  const url = new URL(href)\n\n  if (url.hash && url.hash[0] === '#') {\n    try {\n      const hashSearchParams = new URLSearchParams(url.hash.substring(1))\n      hashSearchParams.forEach((value, key) => {\n        result[key] = value\n      })\n    } catch (e: any) {\n      // hash is not a query string\n    }\n  }\n\n  // search parameters take precedence over hash parameters\n  url.searchParams.forEach((value, key) => {\n    result[key] = value\n  })\n\n  return result\n}\n\ntype Fetch = typeof fetch\n\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\n  let _fetch: Fetch\n  if (customFetch) {\n    _fetch = customFetch\n  } else if (typeof fetch === 'undefined') {\n    _fetch = (...args) =>\n      import('@supabase/node-fetch' as any).then(({ default: fetch }) => fetch(...args))\n  } else {\n    _fetch = fetch\n  }\n  return (...args) => _fetch(...args)\n}\n\nexport const looksLikeFetchResponse = (maybeResponse: unknown): maybeResponse is Response => {\n  return (\n    typeof maybeResponse === 'object' &&\n    maybeResponse !== null &&\n    'status' in maybeResponse &&\n    'ok' in maybeResponse &&\n    'json' in maybeResponse &&\n    typeof (maybeResponse as any).json === 'function'\n  )\n}\n\n// Storage helpers\nexport const setItemAsync = async (\n  storage: SupportedStorage,\n  key: string,\n  data: any\n): Promise<void> => {\n  await storage.setItem(key, JSON.stringify(data))\n}\n\nexport const getItemAsync = async (storage: SupportedStorage, key: string): Promise<unknown> => {\n  const value = await storage.getItem(key)\n\n  if (!value) {\n    return null\n  }\n\n  try {\n    return JSON.parse(value)\n  } catch {\n    return value\n  }\n}\n\nexport const removeItemAsync = async (storage: SupportedStorage, key: string): Promise<void> => {\n  await storage.removeItem(key)\n}\n\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred<T = any> {\n  public static promiseConstructor: PromiseConstructor = Promise\n\n  public readonly promise!: PromiseLike<T>\n\n  public readonly resolve!: (value?: T | PromiseLike<T>) => void\n\n  public readonly reject!: (reason?: any) => any\n\n  public constructor() {\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\n    ;(this as any).promise = new Deferred.promiseConstructor((res, rej) => {\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi\n      ;(this as any).resolve = res\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi\n      ;(this as any).reject = rej\n    })\n  }\n}\n\nexport function decodeJWT(token: string): {\n  header: JwtHeader\n  payload: JwtPayload\n  signature: Uint8Array\n  raw: {\n    header: string\n    payload: string\n  }\n} {\n  const parts = token.split('.')\n\n  if (parts.length !== 3) {\n    throw new AuthInvalidJwtError('Invalid JWT structure')\n  }\n\n  // Regex checks for base64url format\n  for (let i = 0; i < parts.length; i++) {\n    if (!BASE64URL_REGEX.test(parts[i] as string)) {\n      throw new AuthInvalidJwtError('JWT not in base64url format')\n    }\n  }\n  const data = {\n    // using base64url lib\n    header: JSON.parse(stringFromBase64URL(parts[0])),\n    payload: JSON.parse(stringFromBase64URL(parts[1])),\n    signature: base64UrlToUint8Array(parts[2]),\n    raw: {\n      header: parts[0],\n      payload: parts[1],\n    },\n  }\n  return data\n}\n\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport async function sleep(time: number): Promise<null> {\n  return await new Promise((accept) => {\n    setTimeout(() => accept(null), time)\n  })\n}\n\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable<T>(\n  fn: (attempt: number) => Promise<T>,\n  isRetryable: (attempt: number, error: any | null, result?: T) => boolean\n): Promise<T> {\n  const promise = new Promise<T>((accept, reject) => {\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\n    ;(async () => {\n      for (let attempt = 0; attempt < Infinity; attempt++) {\n        try {\n          const result = await fn(attempt)\n\n          if (!isRetryable(attempt, null, result)) {\n            accept(result)\n            return\n          }\n        } catch (e: any) {\n          if (!isRetryable(attempt, e)) {\n            reject(e)\n            return\n          }\n        }\n      }\n    })()\n  })\n\n  return promise\n}\n\nfunction dec2hex(dec: number) {\n  return ('0' + dec.toString(16)).substr(-2)\n}\n\n// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\nexport function generatePKCEVerifier() {\n  const verifierLength = 56\n  const array = new Uint32Array(verifierLength)\n  if (typeof crypto === 'undefined') {\n    const charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~'\n    const charSetLen = charSet.length\n    let verifier = ''\n    for (let i = 0; i < verifierLength; i++) {\n      verifier += charSet.charAt(Math.floor(Math.random() * charSetLen))\n    }\n    return verifier\n  }\n  crypto.getRandomValues(array)\n  return Array.from(array, dec2hex).join('')\n}\n\nasync function sha256(randomString: string) {\n  const encoder = new TextEncoder()\n  const encodedData = encoder.encode(randomString)\n  const hash = await crypto.subtle.digest('SHA-256', encodedData)\n  const bytes = new Uint8Array(hash)\n\n  return Array.from(bytes)\n    .map((c) => String.fromCharCode(c))\n    .join('')\n}\n\nexport async function generatePKCEChallenge(verifier: string) {\n  const hasCryptoSupport =\n    typeof crypto !== 'undefined' &&\n    typeof crypto.subtle !== 'undefined' &&\n    typeof TextEncoder !== 'undefined'\n\n  if (!hasCryptoSupport) {\n    console.warn(\n      'WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.'\n    )\n    return verifier\n  }\n  const hashed = await sha256(verifier)\n  return btoa(hashed).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '')\n}\n\nexport async function getCodeChallengeAndMethod(\n  storage: SupportedStorage,\n  storageKey: string,\n  isPasswordRecovery = false\n) {\n  const codeVerifier = generatePKCEVerifier()\n  let storedCodeVerifier = codeVerifier\n  if (isPasswordRecovery) {\n    storedCodeVerifier += '/PASSWORD_RECOVERY'\n  }\n  await setItemAsync(storage, `${storageKey}-code-verifier`, storedCodeVerifier)\n  const codeChallenge = await generatePKCEChallenge(codeVerifier)\n  const codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256'\n  return [codeChallenge, codeChallengeMethod]\n}\n\n/** Parses the API version which is 2YYY-MM-DD. */\nconst API_VERSION_REGEX = /^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i\n\nexport function parseResponseAPIVersion(response: Response) {\n  const apiVersion = response.headers.get(API_VERSION_HEADER_NAME)\n\n  if (!apiVersion) {\n    return null\n  }\n\n  if (!apiVersion.match(API_VERSION_REGEX)) {\n    return null\n  }\n\n  try {\n    const date = new Date(`${apiVersion}T00:00:00.0Z`)\n    return date\n  } catch (e: any) {\n    return null\n  }\n}\n\nexport function validateExp(exp: number) {\n  if (!exp) {\n    throw new Error('Missing exp claim')\n  }\n  const timeNow = Math.floor(Date.now() / 1000)\n  if (exp <= timeNow) {\n    throw new Error('JWT has expired')\n  }\n}\n\nexport function getAlgorithm(\n  alg: 'HS256' | 'RS256' | 'ES256'\n): RsaHashedImportParams | EcKeyImportParams {\n  switch (alg) {\n    case 'RS256':\n      return {\n        name: 'RSASSA-PKCS1-v1_5',\n        hash: { name: 'SHA-256' },\n      }\n    case 'ES256':\n      return {\n        name: 'ECDSA',\n        namedCurve: 'P-256',\n        hash: { name: 'SHA-256' },\n      }\n    default:\n      throw new Error('Invalid alg claim')\n  }\n}\n\nconst UUID_REGEX = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/\n\nexport function validateUUID(str: string) {\n  if (!UUID_REGEX.test(str)) {\n    throw new Error('@supabase/auth-js: Expected parameter to be UUID but is not')\n  }\n}\n\nexport function userNotAvailableProxy(): User {\n  const proxyTarget = {} as User\n\n  return new Proxy(proxyTarget, {\n    get: (target: any, prop: string) => {\n      if (prop === '__isUserNotAvailableProxy') {\n        return true\n      }\n      // Preventative check for common problematic symbols during cloning/inspection\n      // These symbols might be accessed by structuredClone or other internal mechanisms.\n      if (typeof prop === 'symbol') {\n        const sProp = (prop as symbol).toString()\n        if (\n          sProp === 'Symbol(Symbol.toPrimitive)' ||\n          sProp === 'Symbol(Symbol.toStringTag)' ||\n          sProp === 'Symbol(util.inspect.custom)'\n        ) {\n          // Node.js util.inspect\n          return undefined\n        }\n      }\n      throw new Error(\n        `@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the \"${prop}\" property of the session object is not supported. Please use getUser() instead.`\n      )\n    },\n    set: (_target: any, prop: string) => {\n      throw new Error(\n        `@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the \"${prop}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`\n      )\n    },\n    deleteProperty: (_target: any, prop: string) => {\n      throw new Error(\n        `@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the \"${prop}\" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`\n      )\n    },\n  })\n}\n\n/**\n * Deep clones a JSON-serializable object using JSON.parse(JSON.stringify(obj)).\n * Note: Only works for JSON-safe data.\n */\nexport function deepClone<T>(obj: T): T {\n  return JSON.parse(JSON.stringify(obj))\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}