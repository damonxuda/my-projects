{"ast":null,"code":"var _jsxFileName = \"/Users/damonxu/Documents/GitHub/my-projects/quiz/src/components/QuestionInput/index.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Plus, BookOpen } from 'lucide-react';\nimport ImportForm from './ImportForm';\nimport ManualForm from './ManualForm';\n\n// 临时常量定义（之后从 constants.js 导入）\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MATH_CATEGORIES = ['计算', '计数', '几何', '数论', '应用题', '行程', '组合'];\nconst CATEGORIES = ['行程', '组合', '数论', '几何', '计算', '应用题', '逻辑推理', '计数', '其他'];\nconst QUESTION_TYPES = ['例1', '例2', '例3', '例4', '例5', '习题1', '习题2', '习题3', '习题4', '习题5'];\nconst QuestionInput = ({\n  questions,\n  setQuestions,\n  db,\n  addDebugInfo,\n  showDebug\n}) => {\n  _s();\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [showImportForm, setShowImportForm] = useState(false);\n  const handleQuestionAdded = async question => {\n    try {\n      const {\n        data,\n        error\n      } = await db.insertQuestion(question);\n      if (error) throw error;\n      setQuestions([...questions, data]);\n      setShowAddForm(false);\n      alert('题目添加成功并保存到数据库！');\n      if (showDebug && addDebugInfo) {\n        addDebugInfo(`手动添加题目: ${question.questionType}`);\n      }\n    } catch (error) {\n      console.error('添加失败:', error);\n      alert('添加失败，请检查数据库连接');\n    }\n  };\n  const handleQuestionsImported = newQuestions => {\n    setQuestions([...questions, ...newQuestions]);\n    setShowImportForm(false);\n    if (showDebug && addDebugInfo) {\n      addDebugInfo(`批量导入 ${newQuestions.length} 道题目`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowImportForm(!showImportForm),\n        className: \"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), \"\\u667A\\u80FD\\u5BFC\\u5165\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowAddForm(!showAddForm),\n        className: \"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), \"\\u624B\\u52A8\\u6DFB\\u52A0\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), showImportForm && /*#__PURE__*/_jsxDEV(ImportForm, {\n      onQuestionsImported: handleQuestionsImported,\n      onCancel: () => setShowImportForm(false),\n      existingQuestions: questions,\n      db: db,\n      addDebugInfo: addDebugInfo,\n      mathCategories: MATH_CATEGORIES\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), showAddForm && /*#__PURE__*/_jsxDEV(ManualForm, {\n      onSubmit: handleQuestionAdded,\n      onCancel: () => setShowAddForm(false),\n      categories: CATEGORIES,\n      questionTypes: QUESTION_TYPES\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(QuestionInput, \"2lFVrc1IF6IFI5ajcgOUaN36pAs=\");\n_c = QuestionInput;\nexport default QuestionInput;\nvar _c;\n$RefreshReg$(_c, \"QuestionInput\");","map":{"version":3,"names":["React","useState","Plus","BookOpen","ImportForm","ManualForm","jsxDEV","_jsxDEV","MATH_CATEGORIES","CATEGORIES","QUESTION_TYPES","QuestionInput","questions","setQuestions","db","addDebugInfo","showDebug","_s","showAddForm","setShowAddForm","showImportForm","setShowImportForm","handleQuestionAdded","question","data","error","insertQuestion","alert","questionType","console","handleQuestionsImported","newQuestions","length","children","className","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","onQuestionsImported","onCancel","existingQuestions","mathCategories","onSubmit","categories","questionTypes","_c","$RefreshReg$"],"sources":["/Users/damonxu/Documents/GitHub/my-projects/quiz/src/components/QuestionInput/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Plus, BookOpen } from 'lucide-react';\nimport ImportForm from './ImportForm';\nimport ManualForm from './ManualForm';\n\n// 临时常量定义（之后从 constants.js 导入）\nconst MATH_CATEGORIES = ['计算', '计数', '几何', '数论', '应用题', '行程', '组合'];\nconst CATEGORIES = ['行程', '组合', '数论', '几何', '计算', '应用题', '逻辑推理', '计数', '其他'];\nconst QUESTION_TYPES = ['例1', '例2', '例3', '例4', '例5', '习题1', '习题2', '习题3', '习题4', '习题5'];\n\nconst QuestionInput = ({ questions, setQuestions, db, addDebugInfo, showDebug }) => {\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [showImportForm, setShowImportForm] = useState(false);\n\n  const handleQuestionAdded = async (question) => {\n    try {\n      const { data, error } = await db.insertQuestion(question);\n      if (error) throw error;\n      \n      setQuestions([...questions, data]);\n      setShowAddForm(false);\n      alert('题目添加成功并保存到数据库！');\n      \n      if (showDebug && addDebugInfo) {\n        addDebugInfo(`手动添加题目: ${question.questionType}`);\n      }\n    } catch (error) {\n      console.error('添加失败:', error);\n      alert('添加失败，请检查数据库连接');\n    }\n  };\n\n  const handleQuestionsImported = (newQuestions) => {\n    setQuestions([...questions, ...newQuestions]);\n    setShowImportForm(false);\n    \n    if (showDebug && addDebugInfo) {\n      addDebugInfo(`批量导入 ${newQuestions.length} 道题目`);\n    }\n  };\n\n  return (\n    <div>\n      {/* 操作按钮 */}\n      <div className=\"flex gap-2 mb-6\">\n        <button\n          onClick={() => setShowImportForm(!showImportForm)}\n          className=\"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2\"\n        >\n          <BookOpen size={20} />\n          智能导入\n        </button>\n        <button\n          onClick={() => setShowAddForm(!showAddForm)}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2\"\n        >\n          <Plus size={20} />\n          手动添加\n        </button>\n      </div>\n\n      {/* 智能导入表单 */}\n      {showImportForm && (\n        <ImportForm\n          onQuestionsImported={handleQuestionsImported}\n          onCancel={() => setShowImportForm(false)}\n          existingQuestions={questions}\n          db={db}\n          addDebugInfo={addDebugInfo}\n          mathCategories={MATH_CATEGORIES}\n        />\n      )}\n\n      {/* 手动添加表单 */}\n      {showAddForm && (\n        <ManualForm\n          onSubmit={handleQuestionAdded}\n          onCancel={() => setShowAddForm(false)}\n          categories={CATEGORIES}\n          questionTypes={QUESTION_TYPES}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default QuestionInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}