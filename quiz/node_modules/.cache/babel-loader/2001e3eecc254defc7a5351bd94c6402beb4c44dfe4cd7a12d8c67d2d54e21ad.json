{"ast":null,"code":"var _jsxFileName = \"/Users/damonxu/Documents/GitHub/my-projects/auth/src/contexts/AuthProvider.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/contexts/AuthProvider.js\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({});\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children,\n  supabaseClient,\n  redirectTo = `${window.location.origin}/reset-password`\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [userProfile, setUserProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  if (!supabaseClient) {\n    throw new Error('AuthProvider requires supabaseClient prop');\n  }\n  useEffect(() => {\n    // 获取当前用户会话\n    const getSession = async () => {\n      var _session$user;\n      const {\n        data: {\n          session\n        }\n      } = await supabaseClient.auth.getSession();\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n      if (session !== null && session !== void 0 && session.user) {\n        await fetchUserProfile(session.user.id);\n      }\n      setLoading(false);\n    };\n    getSession();\n\n    // 监听认证状态变化\n    const {\n      data: {\n        subscription\n      }\n    } = supabaseClient.auth.onAuthStateChange(async (event, session) => {\n      var _session$user2, _session$user3;\n      console.log('Auth state changed:', event, session === null || session === void 0 ? void 0 : (_session$user2 = session.user) === null || _session$user2 === void 0 ? void 0 : _session$user2.email);\n      console.log('=== Session user:', session === null || session === void 0 ? void 0 : session.user); // 新增\n      setUser((_session$user3 = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user3 !== void 0 ? _session$user3 : null);\n      if (session !== null && session !== void 0 && session.user) {\n        console.log('=== Calling fetchUserProfile for:', session.user.id); // 新增\n        await fetchUserProfile(session.user.id);\n\n        // 如果是新用户登录且没有 profile，创建一个\n        if (event === 'SIGNED_IN') {\n          await ensureUserProfile(session.user);\n        }\n      } else {\n        setUserProfile(null);\n      }\n      setLoading(false);\n    });\n    return () => subscription.unsubscribe();\n  }, [supabaseClient]);\n\n  // 获取用户档案信息\n  const fetchUserProfile = async userId => {\n    console.log('=== fetchUserProfile called with userId:', userId); // 新增\n    console.log('=== supabaseClient:', supabaseClient); // 新增：检查客户端\n    try {\n      console.log('=== About to query user_profiles table'); // 新增：查询前\n\n      // 新增：先测试简单查询\n      console.log('=== Testing table access...');\n      console.log('=== Query starting at:', new Date().toISOString());\n      try {\n        const testResult = await supabaseClient.from('user_profiles').select('id').limit(1);\n        console.log('=== Query completed at:', new Date().toISOString());\n        console.log('=== Table access test:', testResult);\n        if (testResult.error) {\n          console.error('Table access denied:', testResult.error);\n          // 可以设置特定的错误状态\n          return;\n        }\n      } catch (error) {\n        console.error('=== Query failed with error:', error);\n        return;\n      }\n      const {\n        data,\n        error\n      } = await supabaseClient.from('user_profiles').select('*').eq('id', userId).single();\n      console.log('=== fetchUserProfile result:', {\n        data,\n        error\n      }); // 新增\n\n      if (error && error.code !== 'PGRST116') {\n        // PGRST116 = 没有找到记录\n        console.error('Error fetching user profile:', error);\n      } else {\n        console.log('=== Setting userProfile to:', data); // 新增\n        setUserProfile(data);\n      }\n    } catch (error) {\n      console.error('=== fetchUserProfile catch error:', error); // 新增：捕获异常\n      console.error('Error fetching user profile:', error);\n    }\n  };\n\n  // 确保用户有 profile 记录\n  const ensureUserProfile = async user => {\n    if (!user) return;\n    try {\n      // 先检查是否已存在\n      const {\n        data: existing\n      } = await supabaseClient.from('user_profiles').select('id').eq('id', user.id).single();\n      if (!existing) {\n        // 不存在则创建\n        console.log('Creating user profile for:', user.email);\n        const {\n          data,\n          error\n        } = await supabaseClient.from('user_profiles').insert([{\n          id: user.id,\n          email: user.email,\n          status: 'pending',\n          requested_at: new Date().toISOString()\n        }]).select().single();\n        if (error) {\n          console.error('Error creating user profile:', error);\n        } else {\n          console.log('User profile created successfully:', data);\n          setUserProfile(data);\n        }\n      }\n    } catch (error) {\n      console.error('Error ensuring user profile:', error);\n    }\n  };\n\n  // 用户注册\n  const signUp = async (email, password) => {\n    try {\n      console.log('Starting signup for:', email);\n      const {\n        data,\n        error\n      } = await supabaseClient.auth.signUp({\n        email,\n        password\n      });\n      if (error) throw error;\n\n      // 注册成功后，profile 会在 onAuthStateChange 中创建\n      console.log('Signup successful:', data);\n      return {\n        data,\n        error: null\n      };\n    } catch (error) {\n      console.error('Signup error:', error);\n      return {\n        data: null,\n        error\n      };\n    }\n  };\n\n  // 用户登录\n  const signIn = async (email, password) => {\n    try {\n      const {\n        data,\n        error\n      } = await supabaseClient.auth.signInWithPassword({\n        email,\n        password\n      });\n      return {\n        data,\n        error\n      };\n    } catch (error) {\n      return {\n        data: null,\n        error\n      };\n    }\n  };\n\n  // 用户登出\n  const signOut = async () => {\n    const {\n      error\n    } = await supabaseClient.auth.signOut();\n    return {\n      error\n    };\n  };\n\n  // 发送密码重置邮件\n  const resetPassword = async email => {\n    try {\n      const {\n        error\n      } = await supabaseClient.auth.resetPasswordForEmail(email, {\n        redirectTo\n      });\n      return {\n        error\n      };\n    } catch (error) {\n      return {\n        error\n      };\n    }\n  };\n\n  // 检查用户是否已批准\n  const isUserApproved = () => {\n    return (userProfile === null || userProfile === void 0 ? void 0 : userProfile.status) === 'approved';\n  };\n\n  // 检查用户是否为管理员\n  const isAdmin = () => {\n    return (userProfile === null || userProfile === void 0 ? void 0 : userProfile.status) === 'approved' && (userProfile === null || userProfile === void 0 ? void 0 : userProfile.role) === 'admin';\n  };\n  const value = {\n    user,\n    userProfile,\n    loading,\n    signUp,\n    signIn,\n    signOut,\n    resetPassword,\n    isUserApproved,\n    isAdmin,\n    fetchUserProfile,\n    ensureUserProfile,\n    // 提供supabaseClient给组件使用\n    supabaseClient\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"WycvliXlKHiFjN+6Nj63IB/wNNM=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","context","Error","AuthProvider","children","supabaseClient","redirectTo","window","location","origin","_s2","user","setUser","userProfile","setUserProfile","loading","setLoading","getSession","_session$user","data","session","auth","fetchUserProfile","id","subscription","onAuthStateChange","event","_session$user2","_session$user3","console","log","email","ensureUserProfile","unsubscribe","userId","Date","toISOString","testResult","from","select","limit","error","eq","single","code","existing","insert","status","requested_at","signUp","password","signIn","signInWithPassword","signOut","resetPassword","resetPasswordForEmail","isUserApproved","isAdmin","role","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/damonxu/Documents/GitHub/my-projects/auth/src/contexts/AuthProvider.js"],"sourcesContent":["// src/contexts/AuthProvider.js\nimport React, { createContext, useContext, useEffect, useState } from 'react';\n\nconst AuthContext = createContext({});\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ \n  children, \n  supabaseClient,\n  redirectTo = `${window.location.origin}/reset-password`\n}) => {\n  const [user, setUser] = useState(null);\n  const [userProfile, setUserProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  if (!supabaseClient) {\n    throw new Error('AuthProvider requires supabaseClient prop');\n  }\n\n  useEffect(() => {\n    // 获取当前用户会话\n    const getSession = async () => {\n      const { data: { session } } = await supabaseClient.auth.getSession();\n      setUser(session?.user ?? null);\n      \n      if (session?.user) {\n        await fetchUserProfile(session.user.id);\n      }\n      setLoading(false);\n    };\n\n    getSession();\n\n    // 监听认证状态变化\n    const { data: { subscription } } = supabaseClient.auth.onAuthStateChange(\n      async (event, session) => {\n        console.log('Auth state changed:', event, session?.user?.email);\n        console.log('=== Session user:', session?.user); // 新增\n        setUser(session?.user ?? null);\n        \n        if (session?.user) {\n          console.log('=== Calling fetchUserProfile for:', session.user.id); // 新增\n          await fetchUserProfile(session.user.id);\n          \n          // 如果是新用户登录且没有 profile，创建一个\n          if (event === 'SIGNED_IN') {\n            await ensureUserProfile(session.user);\n          }\n        } else {\n          setUserProfile(null);\n        }\n        setLoading(false);\n      }\n    );\n\n    return () => subscription.unsubscribe();\n  }, [supabaseClient]);\n\n  // 获取用户档案信息\n  const fetchUserProfile = async (userId) => {\n    console.log('=== fetchUserProfile called with userId:', userId); // 新增\n    console.log('=== supabaseClient:', supabaseClient); // 新增：检查客户端\n    try {\n      console.log('=== About to query user_profiles table'); // 新增：查询前\n\n      // 新增：先测试简单查询\n      console.log('=== Testing table access...');\n      console.log('=== Query starting at:', new Date().toISOString());\n\n      try {\n        const testResult = await supabaseClient.from('user_profiles').select('id').limit(1);\n        console.log('=== Query completed at:', new Date().toISOString());\n        console.log('=== Table access test:', testResult);\n\n        if (testResult.error) {\n          console.error('Table access denied:', testResult.error);\n          // 可以设置特定的错误状态\n          return;\n        }\n      } catch (error) {\n        console.error('=== Query failed with error:', error);\n        return;\n      }\n\n      const { data, error } = await supabaseClient\n        .from('user_profiles')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      console.log('=== fetchUserProfile result:', { data, error }); // 新增\n\n      if (error && error.code !== 'PGRST116') { // PGRST116 = 没有找到记录\n        console.error('Error fetching user profile:', error);\n      } else {\n        console.log('=== Setting userProfile to:', data); // 新增\n        setUserProfile(data);\n      }\n    } catch (error) {\n      console.error('=== fetchUserProfile catch error:', error); // 新增：捕获异常\n      console.error('Error fetching user profile:', error);\n    }\n  };\n\n  // 确保用户有 profile 记录\n  const ensureUserProfile = async (user) => {\n    if (!user) return;\n\n    try {\n      // 先检查是否已存在\n      const { data: existing } = await supabaseClient\n        .from('user_profiles')\n        .select('id')\n        .eq('id', user.id)\n        .single();\n\n      if (!existing) {\n        // 不存在则创建\n        console.log('Creating user profile for:', user.email);\n        const { data, error } = await supabaseClient\n          .from('user_profiles')\n          .insert([\n            {\n              id: user.id,\n              email: user.email,\n              status: 'pending',\n              requested_at: new Date().toISOString(),\n            }\n          ])\n          .select()\n          .single();\n\n        if (error) {\n          console.error('Error creating user profile:', error);\n        } else {\n          console.log('User profile created successfully:', data);\n          setUserProfile(data);\n        }\n      }\n    } catch (error) {\n      console.error('Error ensuring user profile:', error);\n    }\n  };\n\n  // 用户注册\n  const signUp = async (email, password) => {\n    try {\n      console.log('Starting signup for:', email);\n      const { data, error } = await supabaseClient.auth.signUp({\n        email,\n        password,\n      });\n\n      if (error) throw error;\n\n      // 注册成功后，profile 会在 onAuthStateChange 中创建\n      console.log('Signup successful:', data);\n      return { data, error: null };\n    } catch (error) {\n      console.error('Signup error:', error);\n      return { data: null, error };\n    }\n  };\n\n  // 用户登录\n  const signIn = async (email, password) => {\n    try {\n      const { data, error } = await supabaseClient.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      return { data, error };\n    } catch (error) {\n      return { data: null, error };\n    }\n  };\n\n  // 用户登出\n  const signOut = async () => {\n    const { error } = await supabaseClient.auth.signOut();\n    return { error };\n  };\n\n  // 发送密码重置邮件\n  const resetPassword = async (email) => {\n    try {\n      const { error } = await supabaseClient.auth.resetPasswordForEmail(email, {\n        redirectTo,\n      });\n      return { error };\n    } catch (error) {\n      return { error };\n    }\n  };\n\n  // 检查用户是否已批准\n  const isUserApproved = () => {\n    return userProfile?.status === 'approved';\n  };\n\n  // 检查用户是否为管理员\n  const isAdmin = () => {\n    return userProfile?.status === 'approved' && userProfile?.role === 'admin';\n  };\n\n  const value = {\n    user,\n    userProfile,\n    loading,\n    signUp,\n    signIn,\n    signOut,\n    resetPassword,\n    isUserApproved,\n    isAdmin,\n    fetchUserProfile,\n    ensureUserProfile,\n    // 提供supabaseClient给组件使用\n    supabaseClient,\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};"],"mappings":";;;AAAA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9E,MAAMC,WAAW,gBAAGN,aAAa,CAAC,CAAC,CAAC,CAAC;AAErC,OAAO,MAAMO,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAMC,OAAO,GAAGR,UAAU,CAACK,WAAW,CAAC;EACvC,IAAI,CAACG,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC;EAChE;EACA,OAAOD,OAAO;AAChB,CAAC;AAACD,EAAA,CANWD,OAAO;AAQpB,OAAO,MAAMI,YAAY,GAAGA,CAAC;EAC3BC,QAAQ;EACRC,cAAc;EACdC,UAAU,GAAG,GAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM;AACxC,CAAC,KAAK;EAAAC,GAAA;EACJ,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACkB,WAAW,EAAEC,cAAc,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACoB,OAAO,EAAEC,UAAU,CAAC,GAAGrB,QAAQ,CAAC,IAAI,CAAC;EAE5C,IAAI,CAACU,cAAc,EAAE;IACnB,MAAM,IAAIH,KAAK,CAAC,2CAA2C,CAAC;EAC9D;EAEAR,SAAS,CAAC,MAAM;IACd;IACA,MAAMuB,UAAU,GAAG,MAAAA,CAAA,KAAY;MAAA,IAAAC,aAAA;MAC7B,MAAM;QAAEC,IAAI,EAAE;UAAEC;QAAQ;MAAE,CAAC,GAAG,MAAMf,cAAc,CAACgB,IAAI,CAACJ,UAAU,CAAC,CAAC;MACpEL,OAAO,EAAAM,aAAA,GAACE,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAET,IAAI,cAAAO,aAAA,cAAAA,aAAA,GAAI,IAAI,CAAC;MAE9B,IAAIE,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAET,IAAI,EAAE;QACjB,MAAMW,gBAAgB,CAACF,OAAO,CAACT,IAAI,CAACY,EAAE,CAAC;MACzC;MACAP,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IAEDC,UAAU,CAAC,CAAC;;IAEZ;IACA,MAAM;MAAEE,IAAI,EAAE;QAAEK;MAAa;IAAE,CAAC,GAAGnB,cAAc,CAACgB,IAAI,CAACI,iBAAiB,CACtE,OAAOC,KAAK,EAAEN,OAAO,KAAK;MAAA,IAAAO,cAAA,EAAAC,cAAA;MACxBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEJ,KAAK,EAAEN,OAAO,aAAPA,OAAO,wBAAAO,cAAA,GAAPP,OAAO,CAAET,IAAI,cAAAgB,cAAA,uBAAbA,cAAA,CAAeI,KAAK,CAAC;MAC/DF,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEV,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAET,IAAI,CAAC,CAAC,CAAC;MACjDC,OAAO,EAAAgB,cAAA,GAACR,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAET,IAAI,cAAAiB,cAAA,cAAAA,cAAA,GAAI,IAAI,CAAC;MAE9B,IAAIR,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAET,IAAI,EAAE;QACjBkB,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEV,OAAO,CAACT,IAAI,CAACY,EAAE,CAAC,CAAC,CAAC;QACnE,MAAMD,gBAAgB,CAACF,OAAO,CAACT,IAAI,CAACY,EAAE,CAAC;;QAEvC;QACA,IAAIG,KAAK,KAAK,WAAW,EAAE;UACzB,MAAMM,iBAAiB,CAACZ,OAAO,CAACT,IAAI,CAAC;QACvC;MACF,CAAC,MAAM;QACLG,cAAc,CAAC,IAAI,CAAC;MACtB;MACAE,UAAU,CAAC,KAAK,CAAC;IACnB,CACF,CAAC;IAED,OAAO,MAAMQ,YAAY,CAACS,WAAW,CAAC,CAAC;EACzC,CAAC,EAAE,CAAC5B,cAAc,CAAC,CAAC;;EAEpB;EACA,MAAMiB,gBAAgB,GAAG,MAAOY,MAAM,IAAK;IACzCL,OAAO,CAACC,GAAG,CAAC,0CAA0C,EAAEI,MAAM,CAAC,CAAC,CAAC;IACjEL,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEzB,cAAc,CAAC,CAAC,CAAC;IACpD,IAAI;MACFwB,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CAAC,CAAC;;MAEvD;MACAD,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC1CD,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAE,IAAIK,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;MAE/D,IAAI;QACF,MAAMC,UAAU,GAAG,MAAMhC,cAAc,CAACiC,IAAI,CAAC,eAAe,CAAC,CAACC,MAAM,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC;QACnFX,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE,IAAIK,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAAC;QAChEP,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEO,UAAU,CAAC;QAEjD,IAAIA,UAAU,CAACI,KAAK,EAAE;UACpBZ,OAAO,CAACY,KAAK,CAAC,sBAAsB,EAAEJ,UAAU,CAACI,KAAK,CAAC;UACvD;UACA;QACF;MACF,CAAC,CAAC,OAAOA,KAAK,EAAE;QACdZ,OAAO,CAACY,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpD;MACF;MAEA,MAAM;QAAEtB,IAAI;QAAEsB;MAAM,CAAC,GAAG,MAAMpC,cAAc,CACzCiC,IAAI,CAAC,eAAe,CAAC,CACrBC,MAAM,CAAC,GAAG,CAAC,CACXG,EAAE,CAAC,IAAI,EAAER,MAAM,CAAC,CAChBS,MAAM,CAAC,CAAC;MAEXd,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAE;QAAEX,IAAI;QAAEsB;MAAM,CAAC,CAAC,CAAC,CAAC;;MAE9D,IAAIA,KAAK,IAAIA,KAAK,CAACG,IAAI,KAAK,UAAU,EAAE;QAAE;QACxCf,OAAO,CAACY,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,MAAM;QACLZ,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEX,IAAI,CAAC,CAAC,CAAC;QAClDL,cAAc,CAACK,IAAI,CAAC;MACtB;IACF,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACdZ,OAAO,CAACY,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC,CAAC,CAAC;MAC3DZ,OAAO,CAACY,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACtD;EACF,CAAC;;EAED;EACA,MAAMT,iBAAiB,GAAG,MAAOrB,IAAI,IAAK;IACxC,IAAI,CAACA,IAAI,EAAE;IAEX,IAAI;MACF;MACA,MAAM;QAAEQ,IAAI,EAAE0B;MAAS,CAAC,GAAG,MAAMxC,cAAc,CAC5CiC,IAAI,CAAC,eAAe,CAAC,CACrBC,MAAM,CAAC,IAAI,CAAC,CACZG,EAAE,CAAC,IAAI,EAAE/B,IAAI,CAACY,EAAE,CAAC,CACjBoB,MAAM,CAAC,CAAC;MAEX,IAAI,CAACE,QAAQ,EAAE;QACb;QACAhB,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEnB,IAAI,CAACoB,KAAK,CAAC;QACrD,MAAM;UAAEZ,IAAI;UAAEsB;QAAM,CAAC,GAAG,MAAMpC,cAAc,CACzCiC,IAAI,CAAC,eAAe,CAAC,CACrBQ,MAAM,CAAC,CACN;UACEvB,EAAE,EAAEZ,IAAI,CAACY,EAAE;UACXQ,KAAK,EAAEpB,IAAI,CAACoB,KAAK;UACjBgB,MAAM,EAAE,SAAS;UACjBC,YAAY,EAAE,IAAIb,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;QACvC,CAAC,CACF,CAAC,CACDG,MAAM,CAAC,CAAC,CACRI,MAAM,CAAC,CAAC;QAEX,IAAIF,KAAK,EAAE;UACTZ,OAAO,CAACY,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACtD,CAAC,MAAM;UACLZ,OAAO,CAACC,GAAG,CAAC,oCAAoC,EAAEX,IAAI,CAAC;UACvDL,cAAc,CAACK,IAAI,CAAC;QACtB;MACF;IACF,CAAC,CAAC,OAAOsB,KAAK,EAAE;MACdZ,OAAO,CAACY,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACtD;EACF,CAAC;;EAED;EACA,MAAMQ,MAAM,GAAG,MAAAA,CAAOlB,KAAK,EAAEmB,QAAQ,KAAK;IACxC,IAAI;MACFrB,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEC,KAAK,CAAC;MAC1C,MAAM;QAAEZ,IAAI;QAAEsB;MAAM,CAAC,GAAG,MAAMpC,cAAc,CAACgB,IAAI,CAAC4B,MAAM,CAAC;QACvDlB,KAAK;QACLmB;MACF,CAAC,CAAC;MAEF,IAAIT,KAAK,EAAE,MAAMA,KAAK;;MAEtB;MACAZ,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEX,IAAI,CAAC;MACvC,OAAO;QAAEA,IAAI;QAAEsB,KAAK,EAAE;MAAK,CAAC;IAC9B,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdZ,OAAO,CAACY,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;MACrC,OAAO;QAAEtB,IAAI,EAAE,IAAI;QAAEsB;MAAM,CAAC;IAC9B;EACF,CAAC;;EAED;EACA,MAAMU,MAAM,GAAG,MAAAA,CAAOpB,KAAK,EAAEmB,QAAQ,KAAK;IACxC,IAAI;MACF,MAAM;QAAE/B,IAAI;QAAEsB;MAAM,CAAC,GAAG,MAAMpC,cAAc,CAACgB,IAAI,CAAC+B,kBAAkB,CAAC;QACnErB,KAAK;QACLmB;MACF,CAAC,CAAC;MAEF,OAAO;QAAE/B,IAAI;QAAEsB;MAAM,CAAC;IACxB,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd,OAAO;QAAEtB,IAAI,EAAE,IAAI;QAAEsB;MAAM,CAAC;IAC9B;EACF,CAAC;;EAED;EACA,MAAMY,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,MAAM;MAAEZ;IAAM,CAAC,GAAG,MAAMpC,cAAc,CAACgB,IAAI,CAACgC,OAAO,CAAC,CAAC;IACrD,OAAO;MAAEZ;IAAM,CAAC;EAClB,CAAC;;EAED;EACA,MAAMa,aAAa,GAAG,MAAOvB,KAAK,IAAK;IACrC,IAAI;MACF,MAAM;QAAEU;MAAM,CAAC,GAAG,MAAMpC,cAAc,CAACgB,IAAI,CAACkC,qBAAqB,CAACxB,KAAK,EAAE;QACvEzB;MACF,CAAC,CAAC;MACF,OAAO;QAAEmC;MAAM,CAAC;IAClB,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd,OAAO;QAAEA;MAAM,CAAC;IAClB;EACF,CAAC;;EAED;EACA,MAAMe,cAAc,GAAGA,CAAA,KAAM;IAC3B,OAAO,CAAA3C,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEkC,MAAM,MAAK,UAAU;EAC3C,CAAC;;EAED;EACA,MAAMU,OAAO,GAAGA,CAAA,KAAM;IACpB,OAAO,CAAA5C,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEkC,MAAM,MAAK,UAAU,IAAI,CAAAlC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE6C,IAAI,MAAK,OAAO;EAC5E,CAAC;EAED,MAAMC,KAAK,GAAG;IACZhD,IAAI;IACJE,WAAW;IACXE,OAAO;IACPkC,MAAM;IACNE,MAAM;IACNE,OAAO;IACPC,aAAa;IACbE,cAAc;IACdC,OAAO;IACPnC,gBAAgB;IAChBU,iBAAiB;IACjB;IACA3B;EACF,CAAC;EAED,oBACER,OAAA,CAACC,WAAW,CAAC8D,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAvD,QAAA,EAChCA;EAAQ;IAAAyD,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACtD,GAAA,CA7NWP,YAAY;AAAA8D,EAAA,GAAZ9D,YAAY;AAAA,IAAA8D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}