{"ast":null,"code":"// src/components/admin/UserManagement.js\nimport React,{useState,useEffect}from'react';import{useAuth,createSupabaseClientFromEnv}from'../../../../auth/src';import LoadingSpinner from'../common/LoadingSpinner';// 创建supabase客户端实例\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const supabase=createSupabaseClientFromEnv();const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[processingUser,setProcessingUser]=useState(null);const[filter,setFilter]=useState('pending');// pending, approved, rejected, all\nconst{user:currentUser}=useAuth();useEffect(()=>{fetchUsers();},[filter]);const fetchUsers=async()=>{try{setLoading(true);let query=supabase.from('user_profiles').select('*').order('requested_at',{ascending:false});if(filter!=='all'){query=query.eq('status',filter);}const{data,error}=await query;if(error)throw error;setUsers(data||[]);}catch(error){console.error('Error fetching users:',error);alert('获取用户列表失败');}finally{setLoading(false);}};const handleUserAction=async function(userId,action){let notes=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';if(!window.confirm(\"\\u786E\\u5B9A\\u8981\".concat(action==='approved'?'批准':'拒绝',\"\\u8FD9\\u4E2A\\u7528\\u6237\\u5417\\uFF1F\"))){return;}try{setProcessingUser(userId);const updateData={status:action,approved_at:action==='approved'?new Date().toISOString():null,approved_by:currentUser.id,notes:notes||null,updated_at:new Date().toISOString()};const{error}=await supabase.from('user_profiles').update(updateData).eq('id',userId);if(error)throw error;alert(\"\\u7528\\u6237\\u5DF2\".concat(action==='approved'?'批准':'拒绝'));await fetchUsers();// 刷新列表\n}catch(error){console.error('Error updating user:',error);alert('操作失败');}finally{setProcessingUser(null);}};const handleNotesSubmit=(userId,action)=>{const notes=prompt(\"\\u8BF7\\u8F93\\u5165\".concat(action==='approved'?'批准':'拒绝',\"\\u7406\\u7531\\uFF08\\u53EF\\u9009\\uFF09\\uFF1A\"));if(notes!==null){// 用户没有取消\nhandleUserAction(userId,action,notes);}};const getStatusBadge=status=>{const styles={pending:'bg-yellow-100 text-yellow-800',approved:'bg-green-100 text-green-800',rejected:'bg-red-100 text-red-800'};const labels={pending:'待审批',approved:'已批准',rejected:'已拒绝'};return/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded-full \".concat(styles[status]||'bg-gray-100 text-gray-800'),children:labels[status]||status});};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{message:\"\\u52A0\\u8F7D\\u7528\\u6237\\u5217\\u8868\\u4E2D...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"\\u7528\\u6237\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"\\u7BA1\\u7406\\u7528\\u6237\\u6CE8\\u518C\\u7533\\u8BF7\\u548C\\u6743\\u9650\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-1 bg-gray-100 p-1 rounded-lg max-w-md\",children:[{key:'pending',label:'待审批',count:users.filter(u=>u.status==='pending').length},{key:'approved',label:'已批准',count:users.filter(u=>u.status==='approved').length},{key:'rejected',label:'已拒绝',count:users.filter(u=>u.status==='rejected').length},{key:'all',label:'全部',count:users.length}].map(_ref=>{let{key,label,count}=_ref;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setFilter(key),className:\"px-3 py-2 text-sm font-medium rounded-md transition-colors \".concat(filter===key?'bg-white text-blue-600 shadow-sm':'text-gray-600 hover:text-gray-900'),children:[label,\" (\",count,\")\"]},key);})})}),users.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-lg\",children:filter==='all'?'暂无用户':\"\\u6682\\u65E0\".concat(filter==='pending'?'待审批':filter==='approved'?'已批准':'已拒绝',\"\\u7528\\u6237\")})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-md\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200\",children:users.map(userProfile=>{var _userProfile$email;return/*#__PURE__*/_jsx(\"li\",{className:\"px-6 py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:(_userProfile$email=userProfile.email)===null||_userProfile$email===void 0?void 0:_userProfile$email.charAt(0).toUpperCase()})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:userProfile.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 flex items-center space-x-2\",children:[getStatusBadge(userProfile.status),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-gray-500\",children:[\"\\u7533\\u8BF7\\u65F6\\u95F4\\uFF1A\",new Date(userProfile.requested_at).toLocaleString('zh-CN')]})]}),userProfile.notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:[\"\\u5907\\u6CE8\\uFF1A\",userProfile.notes]}),userProfile.approved_at&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-xs text-gray-500\",children:[\"\\u5904\\u7406\\u65F6\\u95F4\\uFF1A\",new Date(userProfile.approved_at).toLocaleString('zh-CN')]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[userProfile.status==='pending'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNotesSubmit(userProfile.id,'approved'),disabled:processingUser===userProfile.id,className:\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50\",children:processingUser===userProfile.id?'处理中...':'批准'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNotesSubmit(userProfile.id,'rejected'),disabled:processingUser===userProfile.id,className:\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50\",children:processingUser===userProfile.id?'处理中...':'拒绝'})]}),userProfile.status==='approved'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUserAction(userProfile.id,'rejected','管理员撤销批准'),disabled:processingUser===userProfile.id,className:\"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50\",children:\"\\u64A4\\u9500\"}),userProfile.status==='rejected'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUserAction(userProfile.id,'approved','重新批准'),disabled:processingUser===userProfile.id,className:\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\",children:\"\\u91CD\\u65B0\\u6279\\u51C6\"})]})]})},userProfile.id);})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 text-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:fetchUsers,className:\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\",children:\"\\u5237\\u65B0\\u5217\\u8868\"})})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","useAuth","createSupabaseClientFromEnv","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","supabase","UserManagement","users","setUsers","loading","setLoading","processingUser","setProcessingUser","filter","setFilter","user","currentUser","fetchUsers","query","from","select","order","ascending","eq","data","error","console","alert","handleUserAction","userId","action","notes","arguments","length","undefined","window","confirm","concat","updateData","status","approved_at","Date","toISOString","approved_by","id","updated_at","update","handleNotesSubmit","prompt","getStatusBadge","styles","pending","approved","rejected","labels","className","children","message","key","label","count","u","map","_ref","onClick","userProfile","_userProfile$email","email","charAt","toUpperCase","requested_at","toLocaleString","disabled"],"sources":["/Users/damonxu/Documents/GitHub/my-projects/quiz/src/components/admin/UserManagement.js"],"sourcesContent":["// src/components/admin/UserManagement.js\nimport React, { useState, useEffect } from 'react';\nimport { useAuth, createSupabaseClientFromEnv } from '../../../../auth/src';\nimport LoadingSpinner from '../common/LoadingSpinner';\n\n// 创建supabase客户端实例\nconst supabase = createSupabaseClientFromEnv();\n\nconst UserManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [processingUser, setProcessingUser] = useState(null);\n  const [filter, setFilter] = useState('pending'); // pending, approved, rejected, all\n  const { user: currentUser } = useAuth();\n\n  useEffect(() => {\n    fetchUsers();\n  }, [filter]);\n\n  const fetchUsers = async () => {\n    try {\n      setLoading(true);\n      let query = supabase\n        .from('user_profiles')\n        .select('*')\n        .order('requested_at', { ascending: false });\n\n      if (filter !== 'all') {\n        query = query.eq('status', filter);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n      setUsers(data || []);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      alert('获取用户列表失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleUserAction = async (userId, action, notes = '') => {\n    if (!window.confirm(`确定要${action === 'approved' ? '批准' : '拒绝'}这个用户吗？`)) {\n      return;\n    }\n\n    try {\n      setProcessingUser(userId);\n      \n      const updateData = {\n        status: action,\n        approved_at: action === 'approved' ? new Date().toISOString() : null,\n        approved_by: currentUser.id,\n        notes: notes || null,\n        updated_at: new Date().toISOString(),\n      };\n\n      const { error } = await supabase\n        .from('user_profiles')\n        .update(updateData)\n        .eq('id', userId);\n\n      if (error) throw error;\n\n      alert(`用户已${action === 'approved' ? '批准' : '拒绝'}`);\n      await fetchUsers(); // 刷新列表\n    } catch (error) {\n      console.error('Error updating user:', error);\n      alert('操作失败');\n    } finally {\n      setProcessingUser(null);\n    }\n  };\n\n  const handleNotesSubmit = (userId, action) => {\n    const notes = prompt(`请输入${action === 'approved' ? '批准' : '拒绝'}理由（可选）：`);\n    if (notes !== null) { // 用户没有取消\n      handleUserAction(userId, action, notes);\n    }\n  };\n\n  const getStatusBadge = (status) => {\n    const styles = {\n      pending: 'bg-yellow-100 text-yellow-800',\n      approved: 'bg-green-100 text-green-800',\n      rejected: 'bg-red-100 text-red-800',\n    };\n\n    const labels = {\n      pending: '待审批',\n      approved: '已批准',\n      rejected: '已拒绝',\n    };\n\n    return (\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${styles[status] || 'bg-gray-100 text-gray-800'}`}>\n        {labels[status] || status}\n      </span>\n    );\n  };\n\n  if (loading) {\n    return <LoadingSpinner message=\"加载用户列表中...\" />;\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900\">用户管理</h1>\n        <p className=\"mt-2 text-gray-600\">管理用户注册申请和权限</p>\n      </div>\n\n      {/* 筛选器 */}\n      <div className=\"mb-6\">\n        <div className=\"flex space-x-1 bg-gray-100 p-1 rounded-lg max-w-md\">\n          {[\n            { key: 'pending', label: '待审批', count: users.filter(u => u.status === 'pending').length },\n            { key: 'approved', label: '已批准', count: users.filter(u => u.status === 'approved').length },\n            { key: 'rejected', label: '已拒绝', count: users.filter(u => u.status === 'rejected').length },\n            { key: 'all', label: '全部', count: users.length },\n          ].map(({ key, label, count }) => (\n            <button\n              key={key}\n              onClick={() => setFilter(key)}\n              className={`px-3 py-2 text-sm font-medium rounded-md transition-colors ${\n                filter === key\n                  ? 'bg-white text-blue-600 shadow-sm'\n                  : 'text-gray-600 hover:text-gray-900'\n              }`}\n            >\n              {label} ({count})\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* 用户列表 */}\n      {users.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500 text-lg\">\n            {filter === 'all' ? '暂无用户' : `暂无${filter === 'pending' ? '待审批' : filter === 'approved' ? '已批准' : '已拒绝'}用户`}\n          </p>\n        </div>\n      ) : (\n        <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n          <ul className=\"divide-y divide-gray-200\">\n            {users.map((userProfile) => (\n              <li key={userProfile.id} className=\"px-6 py-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center\">\n                          <span className=\"text-sm font-medium text-gray-700\">\n                            {userProfile.email?.charAt(0).toUpperCase()}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm font-medium text-gray-900 truncate\">\n                          {userProfile.email}\n                        </p>\n                        <div className=\"mt-1 flex items-center space-x-2\">\n                          {getStatusBadge(userProfile.status)}\n                          <span className=\"text-xs text-gray-500\">\n                            申请时间：{new Date(userProfile.requested_at).toLocaleString('zh-CN')}\n                          </span>\n                        </div>\n                        {userProfile.notes && (\n                          <p className=\"mt-1 text-sm text-gray-600\">\n                            备注：{userProfile.notes}\n                          </p>\n                        )}\n                        {userProfile.approved_at && (\n                          <p className=\"mt-1 text-xs text-gray-500\">\n                            处理时间：{new Date(userProfile.approved_at).toLocaleString('zh-CN')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* 操作按钮 */}\n                  <div className=\"flex items-center space-x-2\">\n                    {userProfile.status === 'pending' && (\n                      <>\n                        <button\n                          onClick={() => handleNotesSubmit(userProfile.id, 'approved')}\n                          disabled={processingUser === userProfile.id}\n                          className=\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50\"\n                        >\n                          {processingUser === userProfile.id ? '处理中...' : '批准'}\n                        </button>\n                        <button\n                          onClick={() => handleNotesSubmit(userProfile.id, 'rejected')}\n                          disabled={processingUser === userProfile.id}\n                          className=\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 disabled:opacity-50\"\n                        >\n                          {processingUser === userProfile.id ? '处理中...' : '拒绝'}\n                        </button>\n                      </>\n                    )}\n                    \n                    {userProfile.status === 'approved' && (\n                      <button\n                        onClick={() => handleUserAction(userProfile.id, 'rejected', '管理员撤销批准')}\n                        disabled={processingUser === userProfile.id}\n                        className=\"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50\"\n                      >\n                        撤销\n                      </button>\n                    )}\n\n                    {userProfile.status === 'rejected' && (\n                      <button\n                        onClick={() => handleUserAction(userProfile.id, 'approved', '重新批准')}\n                        disabled={processingUser === userProfile.id}\n                        className=\"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\"\n                      >\n                        重新批准\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* 刷新按钮 */}\n      <div className=\"mt-6 text-center\">\n        <button\n          onClick={fetchUsers}\n          className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n        >\n          刷新列表\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default UserManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}