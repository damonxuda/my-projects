# ç¾è‚¡é‡åŒ–äº¤æ˜“ç³»ç»Ÿ - Lambda å‡½æ•°

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

å¤š LLM ç¾è‚¡æ¨¡æ‹Ÿäº¤æ˜“ç³»ç»Ÿï¼Œæ¯å°æ—¶è¿è¡Œä¸€æ¬¡ï¼Œä½¿ç”¨ 10 ä¸ªå¤§è¯­è¨€æ¨¡å‹è¿›è¡Œç¾è‚¡äº¤æ˜“å†³ç­–ã€‚

### æ ¸å¿ƒç‰¹æ€§
- âœ… **10ä¸ª LLM Agent**ï¼šOpenAI (2ä¸ª), Gemini (2ä¸ª), Claude (2ä¸ª), Grok (2ä¸ª), DeepSeek (1ä¸ª), Qwen (1ä¸ª)
- âœ… **1ä¸ªåŸºå‡†ç­–ç•¥**ï¼šQQQ Buy & Hold
- âœ… **æ¯å°æ—¶æ‰§è¡Œ**ï¼šç¾ä¸œäº¤æ˜“æ—¶é—´ 9:30-16:00
- âœ… **æ¨¡æ‹Ÿåˆå§‹èµ„é‡‘**ï¼š$50,000
- âœ… **äº¤æ˜“æ ‡çš„**ï¼š12åªä¸»æµç¾è‚¡ + 2åª ETF

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CloudWatch Events (æ¯å°æ—¶è§¦å‘)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Lambda Function (index.mjs)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. è·å–å¸‚åœºæ•°æ® (Yahoo Finance)                â”‚  â”‚
â”‚  â”‚    - 12åªè‚¡ç¥¨å®æ—¶æŠ¥ä»·                          â”‚  â”‚
â”‚  â”‚    - æŠ€æœ¯æŒ‡æ ‡ (RSI, MACD, MA)                 â”‚  â”‚
â”‚  â”‚    - è´¢ç»æ–°é—» (å¯é€‰)                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. è·å–å½“å‰æŒä»“ (Supabase)                     â”‚  â”‚
â”‚  â”‚    - ç°é‡‘ä½™é¢                                  â”‚  â”‚
â”‚  â”‚    - è‚¡ç¥¨æŒä»“                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3. LLM å†³ç­– (å¹¶è¡Œ)                            â”‚  â”‚
â”‚  â”‚    - 10ä¸ª Agent åŒæ—¶å†³ç­–                       â”‚  â”‚
â”‚  â”‚    - è¿”å› buy/sell/hold æŒ‡ä»¤                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 4. æ‰§è¡Œäº¤æ˜“ (æ¨¡æ‹Ÿ)                            â”‚  â”‚
â”‚  â”‚    - è®¡ç®—äº¤æ˜“æˆæœ¬                              â”‚  â”‚
â”‚  â”‚    - æ›´æ–°æŒä»“                                  â”‚  â”‚
â”‚  â”‚    - è®¡ç®—æ€»ä»·å€¼å’Œæ”¶ç›Š                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 5. ä¿å­˜è®°å½• (Supabase)                        â”‚  â”‚
â”‚  â”‚    - stock_trading_portfolios                 â”‚  â”‚
â”‚  â”‚    - stock_trading_decisions                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å‰ç«¯å±•ç¤º (trading-stocks)                    â”‚
â”‚  - Agent ä¿¡æ¯å¡ç‰‡                                    â”‚
â”‚  - å†³ç­–æ—¶é—´çº¿                                        â”‚
â”‚  - æ”¶ç›Šè¶‹åŠ¿å›¾                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ•°æ®è¡¨ç»“æ„

### stock_trading_portfolios
```sql
{
  agent_name: 'deepseek',
  cash: 25000.00,
  holdings: {
    "AAPL": 50,
    "MSFT": 30,
    "GOOGL": 10
  },
  total_value: 51234.56,
  pnl: 1234.56,
  pnl_percentage: 2.47,
  user_email: 'admin@example.com'
}
```

### stock_trading_decisions
```sql
{
  agent_name: 'deepseek',
  decision: {
    action: 'buy',
    asset: 'AAPL',
    amount: 10,
    reason: 'è‹¹æœæ–°å“å‘å¸ƒä¼šè¡¨ç°å¼ºåŠ²...'
  },
  market_data: {
    "AAPL": { price: 175.50, change: 2.3, volume: 45000000 },
    ...
  },
  portfolio_value: 51234.56
}
```

---

## â° æ‰§è¡Œæ—¶é—´

### ç¾ä¸œäº¤æ˜“æ—¶é—´ï¼ˆæ¯å°æ—¶ï¼‰
```
09:30 - å¼€ç›˜å30åˆ†é’Ÿ
10:30
11:30
12:30
13:30
14:30
15:30 - æ¥è¿‘æ”¶ç›˜
```

### CloudWatch Cron è¡¨è¾¾å¼
```
cron(30 14-20 ? * MON-FRI *)  # UTC æ—¶é—´
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. åˆ›å»ºæ•°æ®åº“è¡¨
```bash
# åœ¨ Supabase SQL Editor æ‰§è¡Œ
psql < create-tables.sql
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥å®é™…çš„ API keys
```

### 4. æœ¬åœ°æµ‹è¯•
```bash
node index.mjs
```

### 5. éƒ¨ç½²åˆ° AWS Lambda
```bash
# é€šè¿‡ GitHub Actions è‡ªåŠ¨éƒ¨ç½²
git add .
git commit -m "Add stock trading Lambda function"
git push
```

---

## ğŸ“ˆ äº¤æ˜“æ ‡çš„

### å¤§ç›˜ ETF
- **QQQ** - çº³æ–¯è¾¾å…‹100 (åŸºå‡†ç­–ç•¥)
- **SPY** - æ ‡æ™®500

### ç§‘æŠ€è‚¡
- **AAPL** - è‹¹æœ
- **MSFT** - å¾®è½¯
- **GOOGL** - è°·æ­Œ
- **AMZN** - äºšé©¬é€Š
- **NVDA** - è‹±ä¼Ÿè¾¾
- **TSLA** - ç‰¹æ–¯æ‹‰
- **META** - Meta

### å…¶ä»–
- **NFLX** - å¥ˆé£
- **DIS** - è¿ªå£«å°¼
- **JPM** - æ‘©æ ¹å¤§é€š

---

## ğŸ”’ æƒé™æ§åˆ¶

### ä»…ç®¡ç†å‘˜å¯è§
- å‰ç«¯ä½¿ç”¨ Clerk è®¤è¯
- æ£€æŸ¥ user email æ˜¯å¦åœ¨ç™½åå•
- RLS ç­–ç•¥é™åˆ¶æ•°æ®è®¿é—®

---

## ğŸ“ å¾…åŠäº‹é¡¹

- [ ] å®Œæˆ Lambda å‡½æ•°æ ¸å¿ƒé€»è¾‘
- [ ] æµ‹è¯• Yahoo Finance æ•°æ®è·å–
- [ ] å®ç° LLM å†³ç­–é€»è¾‘
- [ ] åˆ›å»ºå‰ç«¯é¡¹ç›®
- [ ] æ·»åŠ ç®¡ç†å‘˜æƒé™æ§åˆ¶
- [ ] éƒ¨ç½²åˆ° AWS
- [ ] è®¾ç½® CloudWatch Events

---

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: Yahoo Finance API è¯·æ±‚å¤±è´¥ï¼Ÿ**
A: Yahoo Finance å…è´¹ API æœ‰è¯·æ±‚é¢‘ç‡é™åˆ¶ï¼Œå»ºè®®æ·»åŠ é‡è¯•é€»è¾‘å’Œç¼“å­˜ã€‚

**Q: Lambda è¶…æ—¶ï¼Ÿ**
A: 10ä¸ª LLM å¹¶è¡Œè°ƒç”¨å¯èƒ½è¾ƒæ…¢ï¼Œå»ºè®®è®¾ç½® timeout ä¸º 5 åˆ†é’Ÿã€‚

**Q: å¦‚ä½•å¤„ç†è‚¡ç¥¨åˆ†çº¢ï¼Ÿ**
A: è‡ªåŠ¨æ£€æµ‹åˆ†çº¢äº‹ä»¶ï¼Œå°†åˆ†çº¢é‡‘é¢åŠ å…¥ç°é‡‘ä½™é¢ã€‚

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Yahoo Finance API](https://github.com/gadicc/node-yahoo-finance2)
- [Supabase Documentation](https://supabase.com/docs)
- [AWS Lambda Best Practices](https://docs.aws.amazon.com/lambda/latest/dg/best-practices.html)
